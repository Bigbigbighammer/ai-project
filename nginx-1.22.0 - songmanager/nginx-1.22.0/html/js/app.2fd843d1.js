(function(){"use strict";var t={4875:function(t,e,n){var r=n(6848),s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("SongManager")],1)},i=[],o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"song-manager"},[e("h1",[t._v("我喜欢的歌曲")]),e("div",{staticClass:"song-form"},[e("h2",[t._v(t._s(t.isEditing?"编辑歌曲":"添加新歌曲"))]),e("form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"title"}},[t._v("歌曲名:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.currentSong.title,expression:"currentSong.title"}],attrs:{type:"text",id:"title",required:""},domProps:{value:t.currentSong.title},on:{input:function(e){e.target.composing||t.$set(t.currentSong,"title",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"artist"}},[t._v("歌手:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.currentSong.artist,expression:"currentSong.artist"}],attrs:{type:"text",id:"artist",required:""},domProps:{value:t.currentSong.artist},on:{input:function(e){e.target.composing||t.$set(t.currentSong,"artist",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"album"}},[t._v("专辑:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.currentSong.album,expression:"currentSong.album"}],attrs:{type:"text",id:"album"},domProps:{value:t.currentSong.album},on:{input:function(e){e.target.composing||t.$set(t.currentSong,"album",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"genre"}},[t._v("流派:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.currentSong.genre,expression:"currentSong.genre"}],attrs:{type:"text",id:"genre"},domProps:{value:t.currentSong.genre},on:{input:function(e){e.target.composing||t.$set(t.currentSong,"genre",e.target.value)}}})]),e("div",{staticClass:"form-actions"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v(t._s(t.isEditing?"更新":"添加"))]),t.isEditing?e("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.resetForm}},[t._v("取消编辑")]):t._e()])]),t.errorMessage?e("p",{staticClass:"error-message"},[t._v(t._s(t.errorMessage))]):t._e()]),e("div",{staticClass:"song-list"},[e("h2",[t._v("歌曲列表")]),t.isLoading?e("p",[t._v("正在加载...")]):t.songs.length>0?e("ul",t._l(t.songs,(function(n){return e("li",{key:n.id,staticClass:"song-item"},[e("div",{staticClass:"song-info"},[e("strong",[t._v(t._s(n.title))]),t._v(" - "+t._s(n.artist)+" "),n.album?e("span",[t._v(" (专辑: "+t._s(n.album)+")")]):t._e(),n.genre?e("span",[t._v(" [流派: "+t._s(n.genre)+"]")]):t._e()]),e("div",{staticClass:"song-actions"},[e("button",{staticClass:"btn btn-edit",on:{click:function(e){return t.editSong(n)}}},[t._v("编辑")]),e("button",{staticClass:"btn btn-delete",on:{click:function(e){return t.deleteSong(n.id)}}},[t._v("删除")])])])})),0):e("p",[t._v("还没有添加任何歌曲。")])])])},a=[],u=(n(4114),n(8111),n(2489),{name:"SongManager",data(){return{songs:[],currentSong:{id:null,title:"",artist:"",album:"",genre:""},isEditing:!1,isLoading:!1,errorMessage:""}},methods:{async fetchSongs(){this.isLoading=!0,this.errorMessage="";try{const t=await this.$http.get("/songs");this.songs=t.data}catch(t){console.error("获取歌曲列表失败:",t),this.errorMessage="无法加载歌曲列表，请检查后端服务是否运行或网络连接。"}finally{this.isLoading=!1}},async handleSubmit(){if(this.errorMessage="",this.isEditing)try{const t=await this.$http.put(`/songs/${this.currentSong.id}`,this.currentSong),e=this.songs.findIndex((t=>t.id===this.currentSong.id));-1!==e&&this.$set(this.songs,e,t.data),this.resetForm()}catch(t){console.error("更新歌曲失败:",t),this.errorMessage="更新歌曲失败。"}else try{const t={title:this.currentSong.title,artist:this.currentSong.artist,album:this.currentSong.album,genre:this.currentSong.genre},e=await this.$http.post("/songs",t);this.songs.push(e.data),this.resetForm()}catch(t){console.error("添加歌曲失败:",t),this.errorMessage="添加歌曲失败。"}},editSong(t){this.isEditing=!0,this.currentSong={...t},this.errorMessage="",window.scrollTo({top:0,behavior:"smooth"})},async deleteSong(t){if(this.errorMessage="",confirm(`确定要删除 ID 为 ${t} 的歌曲吗？`))try{await this.$http.delete(`/songs/${t}`),this.songs=this.songs.filter((e=>e.id!==t)),this.isEditing&&this.currentSong.id===t&&this.resetForm()}catch(e){console.error("删除歌曲失败:",e),this.errorMessage="删除歌曲失败。",e.response&&404===e.response.status&&(this.errorMessage="删除失败：歌曲未找到。可能已被其他用户删除。",this.fetchSongs())}},resetForm(){this.isEditing=!1,this.currentSong={id:null,title:"",artist:"",album:"",genre:""},this.errorMessage=""}},created(){this.fetchSongs()}}),l=u,c=n(1656),g=(0,c.A)(l,o,a,!1,null,"490b30ac",null),d=g.exports,p={name:"App",components:{SongManager:d}},f=p,h=(0,c.A)(f,s,i,!1,null,null,null),v=h.exports,m=n(4373);r.Ay.config.productionTip=!1,m.A.defaults.baseURL="/api/",r.Ay.prototype.$http=m.A,new r.Ay({render:t=>t(v)}).$mount("#app")}},e={};function n(r){var s=e[r];if(void 0!==s)return s.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.m=t,function(){var t=[];n.O=function(e,r,s,i){if(!r){var o=1/0;for(c=0;c<t.length;c++){r=t[c][0],s=t[c][1],i=t[c][2];for(var a=!0,u=0;u<r.length;u++)(!1&i||o>=i)&&Object.keys(n.O).every((function(t){return n.O[t](r[u])}))?r.splice(u--,1):(a=!1,i<o&&(o=i));if(a){t.splice(c--,1);var l=s();void 0!==l&&(e=l)}}return e}i=i||0;for(var c=t.length;c>0&&t[c-1][2]>i;c--)t[c]=t[c-1];t[c]=[r,s,i]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};n.O.j=function(e){return 0===t[e]};var e=function(e,r){var s,i,o=r[0],a=r[1],u=r[2],l=0;if(o.some((function(e){return 0!==t[e]}))){for(s in a)n.o(a,s)&&(n.m[s]=a[s]);if(u)var c=u(n)}for(e&&e(r);l<o.length;l++)i=o[l],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(c)},r=self["webpackChunksong_manager"]=self["webpackChunksong_manager"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=n.O(void 0,[504],(function(){return n(4875)}));r=n.O(r)})();
//# sourceMappingURL=app.2fd843d1.js.map